<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="沈廷翼的全端學習偵錯日誌。">
    <title>偵錯日誌 - 沈廷翼的履歷</title>

    <script async src="https://www.googtagmanager.com/gtag/js?id=G-TZ5HPBYDWV"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-TZ5HPBYDWV');
    </script>

    <link rel="stylesheet" href="style.css">
</head>

<body>
    <header>
        <div id="hamburger-icon">
            <span></span>
            <span></span>
            <span></span>
        </div>
        <h1>沈廷翼的履歷 - 偵錯日誌</h1>
        <p>資深流程顧問 & 努力成為AI PM中</p>
    </header>

    <div class="page-container">

        <aside class="sidebar">
            <img id="profile-pic" src="images/my-photo.png" alt="沈廷翼的大頭貼">
            
            <div class="contact-info">
                <h3>聯繫資訊</h3>
                <p>
                    Email: <a href="mailto:dksitn@gmail.com">dksitn@gmail.com</a>
                </p>
            </div>
            
            <hr> 
            
            <nav class="main-nav-links">
                <h3>網站導覽</h3>
                <ul>
                    <li><a href="index.html">首頁</a></li>
                    <li><a href="achievements.html">個人專業履歷</a></li>
                    <li><a href="debug_log.html"><b>Gemini 合作日誌</b></a></li>
                    <li><a href="products.html">API 實戰 (訪客)</a></li>
                    <li><a href="admin.html">管理後台 (Admin)</a></li>
                </ul>
            </nav>
        </aside>

        <main class="main-content">
            
            <section>
                <p>
                    <a href="index.html"><strong>&laquo; 返回首頁</strong></a> | 
                    <a href="https://drive.google.com/file/d/1Dia-i_YpGf9bkK_k_2kNbYniEr11Ylq1/view?usp=sharing" target="_blank"><strong>下載完整PDF履歷</strong></a>
                </p>
            </section>
            
            <section>
                <h2>我的學習成就 (V1.0 - V3.0) - 偵錯日誌版</h2>
                
                <h3>階段一：V1.0 前端與 Git 管線</h3>
                <ul>
                    <li>掌握 HTML 語意結構、核心內容標籤。</li>
                    <li>掌握 CSS 選擇器、樣式表連結、核心樣式 (color, width, text-decoration)。</li>
                    <li>[偵錯] 成功使用 CSS 解決瀏覽器預設樣式造成的視覺縮排問題。</li>
                    <li>掌握 JavaScript DOM 操作與事件監聽 (實現點擊彈窗)。</li>
                    <li>掌握 Git 核心指令 (add, commit, push, clone, pull)。</li>
                    <li>[偵錯] 成功解決 Git `command not found` (PATH 環境變數) Bug。</li>
                    <li>[偵錯] 成功解決 Git `not a git repository` (根目錄錯誤) Bug。</li>
                    <li>成功在新/舊電腦間同步開發環境。</li>
                </ul>

                <h3>階段二：V2.0/V3.0 後端與平台遷移</h3>
                <ul>
                    <li>[偵錯] 成功診斷 Zeabur 平台的 n8n+PostgreSQL 存在嚴重連線 Bug。</li>
                    <li>[決策] 基於 R4 導師分析，成功將專案遷移至 Railway 平台。</li>
                    <li>成功在 Railway 部署 n8n, PostgreSQL, Redis, Worker 服務。</li>
                    <li>[偵錯] 成功繞過 n8n「Credential 自動偵測」Bug。</li>
                    <li>[偵錯] 成功找出 Railway PostgreSQL 的「手動 Credential + Ignore SSL」最終連線配置。</li>
                </ul>

                <h3>階段三：資料庫 (PostgreSQL) 實戰</h3>
                <ul>
                    <li>[偵錯] 成功診斷並繞過 `relation "..." already exists` (重複建表) 狀態錯誤。</li>
                    <li>[偵錯] 成功抓到並修正 R1/R6 導師提供的 SQL 拼寫錯誤 (TIMESTAMT_000Z)。</li>
                    <li>成功為 V3.0 (購物網站) 專案建立 `categories` 和 `products` 關聯式資料表。</li>
                    <li>成功 `INSERT` (插入) 10 筆類別資料和 3 筆商品資料。 (R1 註：後續已補增至 6 筆)</li>
                    <li>成功 `SELECT` (查詢) 資料，驗證後端資料的正確性。</li>
                </ul>

                <h3>階段四：API 整合 (n8n)</h3>
                <ul>
                    <li>[偵錯] 成功解決 n8n `Set` 節點的 JSON 語法錯誤，並改用 `Code` 節點強制生成資料。</li>
                    <li>掌握 Notion API Token 申請、授權 (`Add connections`) 與安全儲存 (R2 警告)。</li>
                    <li>[偵錯] 成功繞過 n8n 的「Notion Credential 自動偵測」Bug (採用手動建立)。</li>
                    <li>[偵錯] 成功解決 Notion 節點寫入「空資料」的 Bug (欄位匹配錯誤)。</li>
                    <li>[整合] 成功使用 n8n `Notion` 節點，將 4 筆課程資料成功寫入 Notion Database！</li>
                </ul>

                <h3>階段五：V2.1 核心目標 (Notion API) (Lesson 8) 在 Railway</h3>
                <ul>
                    <li>Bug 1 (Set 節點)： R7/R6 指導你(學員)繞過 n8n Set 節點的 JSON 解析 Bug，改用「Code 節點」強制生成資料</li>
                    <li>掌握 Notion API Token 申請、授權 (`Add connections`) 與安全儲存 (R2 警告)。</li>
                    <li>[偵錯] 成功繞過 n8n 的「Notion Credential 自動偵測」Bug (採用手動建立)。</li>
                    <li>[偵錯] 成功解決 Notion 節點寫入「空資料」的 Bug (欄位匹配錯誤)。</li>
                    <li>[整合] 成功使用 n8n `Notion` 節點，將 4 筆課程資料成功寫入 Notion Database！</li>
                </ul>
            </section>

            <section>
                <h3>階段六：V3.0 動態 API 串接 (Railway n8n)</h3>
                <ul>
                    <li>[目標] 成功串接 V1.0 前端 (`products.js`) 與 V2.0 後端 (n8n + PostgreSQL)。</li>
                    <li>[偵錯] 遭遇「讀取商品失敗！」 錯誤。</li>
                    <li>[RCA 步驟 1] 成功使用 R7 導師的「直接 API 呼叫」SOP，驗證後端 (n8n + DB) 健康，並成功隔離變因。</li>
                    <li>[RCA 步驟 2] 成功使用 F12 開發者工具，抓到前端 `TypeError: products.forEach is not a function` 錯誤。</li>
                    <li>[RCA 根本原因] R7/R5 成功診斷：API 回傳「單一物件」而非「陣列」，起因於 n8n `Respond to Webhook` 節點 誤設為 `First Incoming Item`。</li>
                    <li>[修復] 成功將 n8n 回應模式修正為 `All Incoming Items`。</li>
                    <li>[V3.0 成功！] `products.html` 頁面 成功從 Railway PostgreSQL 動態載入並顯示所有 6 筆商品資料！</li>
                </ul>
            </section>
            
            <section>
                <h3>階段七：V4.0 架構升級 (Supabase BaaS)</h3>
                <ul>
                    <li>[RCA] 成功診斷 n8n 架構下的 CORS 與 API Key 驗證錯誤。</li>
                    <li>[架構決策] 評估 n8n, server.js, Supabase, AppWrite, PocketBase 等中介層選項 (R4 導師)。</li>
                    <li>[V4.0 啟動] 決策採用 **Supabase (BaaS)** 作為 V4.0 的後端，取代 n8n 與 Railway Postgres。</li>
                    <li>[Supabase 建置] 成功建立 Supabase 專案 (Puzzles)。</li>
                    <li>[Supabase DB] 成功使用 Table Editor 建立 `products` 資料表 (包含 `name`, `description`, `price`, `image_url` 欄位)。</li>
                    <li>[架構分離] 確立 `my-resume-v1` (履歷) 與 `puzzles` (API) 兩個獨立的 Railway 服務。</li>
                    <li>[職責分離 (CUD/R)] 成功將 `puzzles` 專案 分離為 `admin.html` (管理) 和 `products.html` (訪客) 兩個頁面。</li>
                </ul>
            </section>

            <section>
                <h3>階段八：V5.x (Admin CRUD) 功能偵錯與升級</h3>
                <ul>
                    <li>[V5.0 偵錯 (AI Bug)] 成功抓到並修復了**由 AI (我) 造成**的 `supabase.createClient` 致命語法錯誤 (`ReferenceError`)。</li>
                    <li>[V5.0 成功！] `admin.html` 成功實現 (C)RUD 功能，`products.html` 成功 (R) 讀取。</li>
                    <li>[V5.3 偵錯 (DB Bug)] 成功診斷 `products_pkey` 錯誤 (RCA：`name` 被設為 PKey，而非 `id`)。</li>
                    <li>[V5.4 升級] 成功實現「名稱重複檢查」(Upsert) 功能。</li>
                    <li>[V5.6 升級] 成功新增 `quantity` (庫存) 欄位 (DB + JS)。</li>
                    <li>[V5.7 升級] 成功實現 `products.html` 只顯示 `quantity > 0` 的商品。</li>
                    <li>[V5.8 升級 (Storage)] 成功建立 Supabase Storage (`product-images` bucket) 並實現「圖片上傳」 功能。</li>
                    <li>[V5.8 偵錯 (RLS Bug)] 成功修復 Storage RLS (`new row violates...`)，新增 `INSERT` Policy。</li>
                    <li>[V5.9 升級 (UI/UX)] 成功將「檔案上傳」 升級為「自訂按鈕」 (UI/UX 優化)。</li>
                </ul>
            </section>

            <section>
                <h3>階段九：V6.x (訪客下單) 功能開發 (今天)</h3>
                <ul>
                    <li>[V6.1 升級 (DB)] 成功建立 `customer_contacts` 資料表 (DB)，並設定 Foreign Key 關聯 `products`。</li>
                    <li>[V6.1 偵錯 (RLS Bug)] 成功修復 `customer_contacts` RLS Policy (<code>authenticated</code> vs <code>anon</code>)。</li>
                    <li>[V6.2 升級] 成功新增 `purchase_quantity` 欄位 (DB + JS)。</li>
                    <li>[V6.2 偵錯 (CSS Bug)] 成功修復 `contact-form` CSS 排版混亂 Bug。</li>
                    <li>**[V6.2 成功！]** `products.html` (訪客頁) **成功**實現「聯繫購買」 並**安全地**寫入 Supabase！</li>
                </ul>
            </section>

        </main> 
    </div> <footer>
        <p>我正在經過我建造的Gemini Gem的指導下，學習如何從零打造動態網站。</p>
        <p>&copy; 以上專頁，由沈廷翼開發的Gemini Gem 輔助下完成</p>
        <p>&copy; 專頁伺服器採用Railway / 程式碼放置於Github / VS Code 編譯器</p>
    </footer>

    <script src="main.js"></script>
</body>
</html>